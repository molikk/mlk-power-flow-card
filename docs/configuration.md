---
myst:
  enable_extensions: [ "colon_fence" ]
---

# Configuration

The card can be configured through the following attributes:

| Attribute | Requirement  | Default                                             | Description                                                  |
|-----------|--------------|-----------------------------------------------------|--------------------------------------------------------------|
| type:     | **Required** | `custom:mlk-power-flow-card`                        | The custom card                                              |
| title:    | Optional     | See optional [Title](#title) attributes below       | List of title attributes.                                    |
| general:  | Optional     | See optional [General](#general) attributes below   | List of general attributes.                                  |
| inverter: | Optional     | See optional [Inverter](#inverter) attributes below | List of inverter attributes.                                 |
| solar:    | Optional     | See optional [Solar](#solar) attributes below       | List of solar attributes. Required if `show_solar: true`     |
| battery:  | Optional     | See required [Battery](#battery) attributes below   | List of battery attributes. Required if `show_battery: true` |
| load:     | Optional     | See optional [Load](#load) attributes below         | List of load attributes.                                     |
| grid:     | Optional     | See optional [Grid](#grid) attributes below         | List of grid attributes. Required if `show_grid: true`       |
| entities: | **Required** | See required [Entities](#entities) attributes below | List of sensor entities.                                     |

## Title

| Attribute     | Requirement | Default | Description                                                     |
|---------------|-------------|---------|-----------------------------------------------------------------|
| title:        | Optional    |         | Set the card title i.e. Inverter One                            |
| title_colour: | Optional    |         | Sets the colour of the card title. (`red`, `green`, `blue` etc) |
| title_size:   | Optional    | `32px`  | Set the font size for the card title i.e. `16px`, `24px`        |

## General

| Attribute              | Requirement | Default | Description                                                                                                                                                                                                                                  |
|------------------------|-------------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| large_font:            | Optional    | `false` | Increases font size of sensor data                                                                                                                                                                                                           |
| panel_mode:            | Optional    | `false` | Toggles panel mode setting card height to `100%`. For use with Panel(1 card) view types or grid layouts                                                                                                                                      |
| card_height:           | Optional    | `396px` | Only used when `panel_mode: false`. Sets the card height in pixels. Specify the value i.e. `400px` or provide a sensor i.e. `input.number_height`                                                                                            |
| card_width:            | Optional    | `100%`  | Only used when `panel_mode: true`. Sets the card width in pixels or percentage. Specify the value i.e. `400px`, `80%` or provide a sensor i.e. `input.number_width`. For adjustments when using the Panel(1 card) view types or grid layouts |
| show_solar:            | Optional    | `true`  | Toggle display of solar information                                                                                                                                                                                                          |
| show_battery:          | Optional    | `true`  | Toggle display of battery information                                                                                                                                                                                                        |
| show_grid:             | Optional    | `true`  | Toggle display of grid information                                                                                                                                                                                                           |
| dynamic_line_width:    | Optional    | `false` | Adjusts the width of the lines and animated dot based on the ratio of current power to `max_power` (defined in each section below). Requires `max_power` to be explicitly defined                                                            |
| max_line_width:        | Optional    | `4`     | Sets the maximum line width when `dynamic_line_width: true`. If you prefer thick lines set a larger value. Reduce this value for a more subtle scaling affect. Values greater the `8` are ignored                                            |
| min_line_width:        | Optional    | `1`     | Sets the minimum or default line width on the card. Values greater the `8` are ignored                                                                                                                                                       |
| decimal_places:        | Optional    | `2`     | Sets the number of decimal places to display when using the `auto_scale` option.                                                                                                                                                             |
| decimal_places_energy: | Optional    | `1`     | Sets the number of decimal places to display for the daily energy values.                                                                                                                                                                    |

## Inverter

| Attribute    | Requirement | Default   | Description                                                                                                                                                                                                                                                                                                                                                                                               |
|--------------|-------------|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| three_phase: | Optional    | `false`   | If set to `true` additional 3 phase sensors will be displayed. Requires entity attributes to be defined i.e. `inverter_current_L2`, `inverter_current_L3`, `inverter_voltage_L2`, `inverter_voltage_L3` , `grid_ct_power_L2`, `grid_ct_power_L3`, `load_power_L1`, `load_power_L2`, `load_power_L3`                                                                                                       |
| auto_scale:  | Optional    | `true`    | If set to `true` the card will use the entities `unit_of_measurement` attribute to perform the correct scaling (i,e, power values greater than 999W will be displayed as kW e.g. 1.23kW) and display the correct unit. The number of decimal places can be changed using the `decimal_places` card attribute apart from the daily energy values which are set using the `decimal_places_energy` attribute |
| model:       | Optional    | `sunsynk` | Selects which inverter image and status codes to use. Options are `lux`, `solis`, `goodwe`, `goodwe_gridmode`, `foxess`, `solax`, `sunsynk`, `victron`, `fronius`, `solaredge`, `growatt`, `sofar`, `ces-battery-box`, `deye`, `azzurro`, `powmr`, `mppsolar`, `smasolar`, `huawei`, , `Easun SMW8kW SA`.                                                                                                 |
| modern:      | Optional    | `true`    | Display the inverter using the modern image. Set to `false` to display an image of the inverter based on the `model` attribute below.                                                                                                                                                                                                                                                                     |
| autarky:     | Optional    | `power`   | Display autarky and ratio as a percentage using either realtime power or daily energy values. Set to `no` to hide (`energy/power/Auto$Self/no`). Check [Autarky](#autarky) for details                                                                                                                                                                                                                    |
| colour:      | Optional    | `grey`    | Sets the colour of the inverter and data. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                                                                                                                                                                                                                                                                                               |
| ac_icon:     | Optional    |           | Set the AC temperature icon. If not present "AC" will be displayed                                                                                                                                                                                                                                                                                                                                        |
| dc_icon:     | Optional    |           | Set the DC temperature icon. If not present "DC" will be displayed                                                                                                                                                                                                                                                                                                                                        |

## Solar

These attributes are only needed if `show_solar` is set to `true`

| Attribute             | Requirement  | Default  | Description                                                                                                                                                                                                                                                                                                                                                                                               |
|-----------------------|--------------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| mppts:                | **Required** | `2`      | Specify the number of MPPT's in use `1`, `2`, `3`, `4` or `5`                                                                                                                                                                                                                                                                                                                                             |
| auto_scale:           | Optional     | `true`   | If set to `true` the card will use the entities `unit_of_measurement` attribute to perform the correct scaling (i,e, power values greater than 999W will be displayed as kW e.g. 1.23kW) and display the correct unit. The number of decimal places can be changed using the `decimal_places` card attribute apart from the daily energy values which are set using the `decimal_places_energy` attribute |
| pv1_name:             | Optional     | `PV1`    | Set the display name for MPPT1                                                                                                                                                                                                                                                                                                                                                                            |
| pv2_name:             | Optional     | `PV2`    | Set the display name for MPPT2                                                                                                                                                                                                                                                                                                                                                                            |
| pv3_name:             | Optional     | `PV3`    | Set the display name for MPPT3                                                                                                                                                                                                                                                                                                                                                                            |
| pv4_name:             | Optional     | `PV4`    | Set the display name for MPPT4                                                                                                                                                                                                                                                                                                                                                                            |
| pv5_name:             | Optional     | `PV5`    | Set the display name for MPPT5                                                                                                                                                                                                                                                                                                                                                                            |
| colour:               | Optional     | `orange` | Sets the colour of all the solar card objects. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                                                                                                                                                                                                                                                                                          |
| dynamic_colour:       | Optional     | `true`   | The solar elements on the card will be greyed out if total solar power < 10W.                                                                                                                                                                                                                                                                                                                             | 
| animation_speed:      | Optional     | `9`      | Set slowest animation speed in seconds, depending on Power produced                                                                                                                                                                                                                                                                                                                                       |
| off_threshold:        | Optional     | `10`     | When total PV power falls belows this threshold colour will change to grey. Requires `dynamic_colour` to be enabled                                                                                                                                                                                                                                                                                       |
| visualize_efficiency: | Optional     | `true`   | `false` - Disabled, `true` - Graphic display of Efficiency                                                                                                                                                                                                                                                                                                                                                |
| show_mppt_production: | Optional     | `true`   | Show each MPPT energy production                                                                                                                                                                                                                                                                                                                                                                          |
| show_mppt_efficiency: | Optional     | `false`  | Show % of each MPPT efficiency                                                                                                                                                                                                                                                                                                                                                                            |
| PV Max Power          | Sub-menu     |          | Shows sub-menu w Max Power values required to calculate and visualize efficiency                                                                                                                                                                                                                                                                                                                          |

| Attribute      | Requirement | Default | Description                                                                                                                                                                                                  |
|----------------|-------------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| max_power:     | Optional    | `8000`  | Maximum power draw to calculate animation speed. This value is also used to calculate the solar efficiency for the total PV power and should equal the total size of your PV array. Numeric value or sensor. |
| pv1_max_power: | Optional    |         | Maximum power of MPPT1 based on the number and size of panels. Used to calculate solar efficiency of the string (W). Numeric value or sensor.                                                                |
| pv2_max_power: | Optional    |         | Maximum power of MPPT2 based on the number and size of panels. Used to calculate solar efficiency of the string (W). Numeric value or sensor.                                                                |
| pv3_max_power: | Optional    |         | Maximum power of MPPT3 based on the number and size of panels. Used to calculate solar efficiency of the string (W). Numeric value or sensor.                                                                |
| pv4_max_power: | Optional    |         | Maximum power of MPPT4 based on the number and size of panels. Used to calculate solar efficiency of the string (W). Numeric value or sensor                                                                 |
| pv5_max_power: | Optional    |         | Maximum power of MPPT5 based on the number and size of panels. Used to calculate solar efficiency of the string (W). Numeric value or sensor                                                                 |

## Battery

To display battery power and current as absolute values set `show_absolute: true`. This is set to false by default and
will return your sensor value. The animated dot will change direction depending on the charging or discharging state.
The `invert_power` attribute can be used to reverse direction if needed by your sensor.

| Attribute              | Requirement  | Default | Description                                                                                                                                                                                                                                                                                                                                                                                               |
|------------------------|--------------|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| energy:                | **Required** | `0`     | Total battery energy in Wh (e.g. 3 x 5.32kWh = 15960). If set to `0` the remaining battery runtime will be hidden. Numeric value or sensor i.e. `sensor.sunsynk_battery_energy`                                                                                                                                                                                                                           |
| shutdown_soc:          | **Required** | `20`    | The battery shutdown percentage used to calculate remaining runtime. Numeric value or sensor i.e. `sensor.sunsynk_battery_capacity_shutdown`                                                                                                                                                                                                                                                              |
| shutdown_soc_offgrid:  | Optional     |         | The offgrid battery shutdown percentage used to calculate remaining runtime. Numeric value or sensor i.e. `sensor.offgrid_battery_capacity_shutdown`                                                                                                                                                                                                                                                      |
| show_daily:            | Optional     | `false` | Toggles the daily total                                                                                                                                                                                                                                                                                                                                                                                   |
| auto_scale:            | Optional     | `true`  | If set to `true` the card will use the entities `unit_of_measurement` attribute to perform the correct scaling (i,e, power values greater than 999W will be displayed as kW e.g. 1.23kW) and display the correct unit. The number of decimal places can be changed using the `decimal_places` card attribute apart from the daily energy values which are set using the `decimal_places_energy` attribute |
| invert_power:          | Optional     | `false` | Set to `true` if your sensor provides a positive number for battery charge and negative number for battery discharge                                                                                                                                                                                                                                                                                      |
| show_absolute:         | Optional     | `false` | set to `true` to display power and current as absolute values                                                                                                                                                                                                                                                                                                                                             |
| colour:                | Optional     | `pink`  | Sets the colour of all the battery card objects. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                                                                                                                                                                                                                                                                                        |
| charge_colour:         | Optional     |         | Sets the colour of all the battery card objects when charging. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                                                                                                                                                                                                                                                                          |
| dynamic_colour:        | Optional     | `true`  | The battery icon colour will change based on the % contribution of the power source (grid, solar) supplying the battery. Set to `false`  to disable. If `priority_load_243: on` solar will prioritise the essential load. If `false` or omitted solar will prioritise the battery.                                                                                                                        |
| linear_gradient:       | Optional     | `true`  | The blocks inside the battery icon that represent SOC will be coloured using a linear gradient that ranges from red to green                                                                                                                                                                                                                                                                              |
| animate:               | Optional     | `true`  | Animates the linear gradient inside the battery icon                                                                                                                                                                                                                                                                                                                                                      |
| animation_speed:       | Optional     | `6`     | Set slowest animation speed in seconds, depending on power draw                                                                                                                                                                                                                                                                                                                                           |
| hide_soc:              | Optional     | `false` | If set to `true` the current program capacity (soc), or for Goodwe inverters the shutdown soc and offgrid shutdown soc that is shown to the left of the current battery SOC will be hidden.                                                                                                                                                                                                               |
| show_remaining_energy: | Optional     | `true`  | Set to `true` to display the remaining battery energy in kWh based on the current SOC. Only visible on the `lite` and `full` cards                                                                                                                                                                                                                                                                        |
| max_power:             | Optional     | `4500`  | Maximum power draw to calculate animation speed. Numeric value or sensor i.e. `number.battery_maximum_discharging_power`                                                                                                                                                                                                                                                                                  |
| path_threshold:        | Optional     | `100`   | Specify threshold to apply dynamic colour to the battery path element. The colour of the path will change to the source colour if the percentage supply by a single source equals or exceeds this value                                                                                                                                                                                                   |

## Load

| Attribute         | Requirement | Default     | Description                                                                                                                                                                                                                                                                                                                                                                                              |
|-------------------|-------------|-------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| show_daily:       | Optional    | `false`     | Toggles the daily total.                                                                                                                                                                                                                                                                                                                                                                                 |
| auto_scale:       | Optional    | `true`      | If set to `true` the card will use the entities `unit_of_measurement` attribute to perform the correct scaling (i,e, power values greater than 999W will be displayed as kW e.g. 1.23kW) and display the correct unit. The number of decimal places can be changed using the `decimal_places` card attribute apart from the daily energy values which are set using the `decimal_places_energy` attribute |
| colour:           | Optional    | `'#5fb6ad'` | Sets the colour of all the load card objects. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                                                                                                                                                                                                                                                                                          |
| dynamic_colour:   | Optional    | `true`      | The essential icon colour will change based on the % contribution of the power source (battery, grid, solar) supplying the load. Set to `false`  to disable                                                                                                                                                                                                                                              |
| dynamic_icon:     | Optional    | `true`      | The essential icon will change when there is 100% contribution from a single power source (battery, grid, solar). Set to `false`  to disable                                                                                                                                                                                                                                                             |
| invert_load:      | Optional    | `false`     | Set to `true` if your sensor provides a negative number when the load is drawing power                                                                                                                                                                                                                                                                                                                   |
| essential_name:   | Optional    | `Essential` | Set the display name for the essential load                                                                                                                                                                                                                                                                                                                                                              |
| additional_loads: | Optional    | `0`         | Display additional loads on the essential side (`0/1/2/3/4`). Three loads will only be visible when using the lite and compact card. Four loads are only visible on the full card if `show_aux: false`                                                                                                                                                                                                   |
| animation_speed:  | Optional    | `8`         | Set slowest animation speed in seconds, depending on Power draw                                                                                                                                                                                                                                                                                                                                          |
| max_power:        | Optional    | `8000`      | Maximum power draw to calculate animation speed. Numeric value or sensor                                                                                                                                                                                                                                                                                                                                 |
| off_threshold:    | Optional    | `0`         | When power falls below this value the load will be considered off and colour will change to grey. Requires `dynamic_colour` to be enabled. Can also be set to `-1` to disable.                                                                                                                                                                                                                           |
| path_threshold:   | Optional    | `100`       | Specify threshold to apply dynamic colour to the load path element. The colour of the path will change to the source colour if the percentage supply by a single source equals or exceeds this value                                                                                                                                                                                                     |
| additional_load   | Optional    |             | Additional Load details: [Additional Load](#load-additional-load)                                                                                                                                                                                                                                                                                                                                        |
| aux               | Optional    |             | Additional Load details: [Aux Load](#load-aux)                                                                                                                                                                                                                                                                                                                                                           |

### Load: Additional Load

| Attribute   | Requirement | Default | Description                                                                                                                                                                                 |
|-------------|-------------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| load1_name: | Optional    |         | Set the display name for the essential load 1                                                                                                                                               |
| load1_icon: | Optional    | none    | Set the essential load 1 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |
| load2_name: | Optional    |         | Set the display name for the essential load 2                                                                                                                                               |
| load2_icon: | Optional    | none    | Set the essential load 2 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |
| load3_name: | Optional    |         | Set the display name for the essential load 3                                                                                                                                               |
| load3_icon: | Optional    | none    | Set the essential load 3image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon.  |
| load4_name: | Optional    |         | Set the display name for the essential load 4                                                                                                                                               |
| load4_icon: | Optional    | none    | Set the essential load 4 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |
| load5_name: | Optional    |         | Set the display name for the essential load 5                                                                                                                                               |
| load5_icon: | Optional    | none    | Set the essential load 5 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |
| load6_name: | Optional    |         | Set the display name for the essential load 6                                                                                                                                               |
| load6_icon: | Optional    | none    | Set the essential load 6 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |
| load7_name: | Optional    |         | Set the display name for the essential load 7                                                                                                                                               |
| load7_icon: | Optional    | none    | Set the essential load 7 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |
| load8_name: | Optional    |         | Set the display name for the essential load 8                                                                                                                                               |
| load8_icon: | Optional    | none    | Set the essential load 8 image using preset or any mdi icon e.g. `mdi:ev-station` Presets are: `boiler`, `pump`, `aircon`, `oven`. You can also provide a sensor that returns the mdi icon. |

### Load: aux

| Attribute           | Requirement | Default           | Description                                                                                                                                             |
|---------------------|-------------|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
| show_aux:           | Optional    | `false`           | Toggles the display of AUX                                                                                                                              |
| aux_name:           | Optional    | `Auxilary`        | Set the display name for the AUX Load                                                                                                                   |
| aux_daily_name:     | Optional    | `DAILY AUX`       | Set the display name for the DAILY AUX label                                                                                                            |
| aux_type:           | Optional    | `default`         | Sets the AUX image using preset or any mdi icon e.g. `mdi:ev-station`. Presets are: `gen`, `inverter` `default`, `oven`, `pump`, `aircon` and `boiler`. |
| invert_aux:         | Optional    | `false`           | Set to `true` if your sensor provides a positive number for AUX input and negative number for AUX output                                                |
| show_absolute_aux:  | Optional    | `false`           | set to `true` to display power as an absolute value                                                                                                     |
| aux_dynamic_colour: | Optional    | `true`            | The respective aux elements on the card will be greyed out if aux power = 0W.                                                                           |
| aux_colour:         | Optional    | `the load colour` | Sets the colour of all the AUX card objects. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                                          |
| aux_off_colour:     | Optional    | `the load colour` | Sets the colour of the AUX icon and label when disconnected. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc)                          |
| aux_loads:          | Optional    | `0`               | Display additional loads on the AUX side (`0/1/2`)                                                                                                      |
| aux_load1_name:     | Optional    |                   | Set the display name for the AUX load 1                                                                                                                 |
| aux_load2_name:     | Optional    |                   | Set the display name for the AUX load 2                                                                                                                 |
| aux_load1_icon:     | Optional    |                   | Set the AUX load 1 image using any mdi icon e.g. `mdi:ev-station`. You can also provide a sensor that returns the mdi icon.                             |
| aux_load2_icon:     | Optional    |                   | Set the AUX load 2 image using any mdi icon e.g. `mdi:ev-station`. You can also provide a sensor that returns the mdi icon.                             |
| show_daily_aux:     | Optional    | `false`           | Toggles the daily AUX total. Only displayed if `show_aux` is set to `true`                                                                              |

## Grid

| Attribute              | Requirement | Default         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|------------------------|-------------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| grid_name:             | Optional    |                 | Set the display name for the grid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| max_power:             | Optional    | `8000`          | Maximum power draw to calculate animation speed. Numeric value or sensor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| show_daily_buy:        | Optional    | `false`         | Toggles the daily buy total                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| label_daily_grid_buy:  | Optional    |                 | Set custom text for the "DAILY GRID BUY" label that is displayed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| show_daily_sell:       | Optional    | `false`         | Toggles the daily sell total                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| label_daily_grid_sell: | Optional    |                 | Set custom test for the "DAILY GRID SELL" label that is displayed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| auto_scale:            | Optional    | `true`          | If set to `true` the card will use the entities `unit_of_measurement` attribute to perform the correct scaling (i,e, power values greater than 999W will be displayed as kW e.g. 1.23kW) and display the correct unit. The number of decimal places can be changed using the `decimal_places` card attribute apart from the daily energy values which are set using the `decimal_places_energy` attribute                                                                                                                                                                                                  |
| invert_grid:           | Optional    | `false`         | Set to `true` if your sensor provides a negative number for grid import and positive number for grid export                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| show_absolute:         | Optional    | `false`         | set to `true` to display power as absolute                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 
| colour:                | Optional    | `'#5490c2'`     | Sets the colour of all the grid card objects. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| no_grid_colour:        | Optional    |                 | Sets the colour of all the grid card objects when there is no grid power. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc). If not set will use the `colour:` value defined above total                                                                                                                                                                                                                                                                                                                                                                                                   |
| export_colour:         | Optional    |                 | Sets the colour of all the grid card objects when exporting (selling) energy. Hex codes (`'#66ff00'` etc) or names (`red`, `green`, `blue` etc). If not set will use the `colour:` value defined above.                                                                                                                                                                                                                                                                                                                                                                                                    |
| grid_off_colour:       | Optional    |                 | Sets the colour of the grid icon when the grid is disconnected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                            |
| energy_cost_decimals:  | Optional    | `2`             | Sets the number of decimal places to display the buy and sell energy costs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| animation_speed:       | Optional    | `8`             | Set slowest animation speed in seconds, depending on power draw                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| off_threshold:         | Optional    | `0`             | When power falls below this value the load will be considered off and colour will change to grey. Requires `dynamic_colour` to be enabled. Can also be set to `-1` to disable.                                                                                                                                                                                                                                                                                                                                                                                                                             |
| import_icon:           | Optional    |                 | Set the grid connected/import image using any mdi icon e.g. `mdi:transmission-tower-import`. You can also provide a sensor that returns the mdi icon. If defined overrides the card default icon.                                                                                                                                                                                                                                                                                                                                                                                                          |
| export_icon:           | Optional    |                 | Set the grid export image using any mdi icon e.g. `mdi:transmission-tower-export`. You can also provide a sensor that returns the mdi icon. If defined overrides the card default icon.                                                                                                                                                                                                                                                                                                                                                                                                                    |
| disconnected_icon:     | Optional    |                 | Set the grid disconnected image using any mdi icon e.g. `mdi:transmission-tower-off`. You can also provide a sensor that returns the mdi icon. If defined overrides the card default icon.                                                                                                                                                                                                                                                                                                                                                                                                                 |
| show_nonessential:     | Optional    | `true`          | Toggles the display of non-essential                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| additional_loads:      | Optional    | `0`             | Toggle the display of additional loads on the non-essential side (`0/1/2/3`) The third load will only be displayed if the inverter timer schedules are not used  due to limited space. Set the battery attribute `hide_soc: true` to display                                                                                                                                                                                                                                                                                                                                                               |
| nonessential_icon:     | Optional    | `default`       | Change the non-essential image using presets or any mdi icon e.g. `mdi:ev-station`. Presets are: <br /> <img height="25px" src="https://api.iconify.design/mdi/house-import-outline.svg"> `default`  <img height="25px" src="https://api.iconify.design/fluent/oven-32-regular.svg"> `oven`, <img height="25px" src="https://api.iconify.design/material-symbols/water-heater.svg"> `boiler` </br> <br/> <img height="25px" src="https://api.iconify.design/material-symbols/water-pump-outline.svg"> `pump`,  <img height="25px" src="https://api.iconify.design/mdi/air-conditioner.svg"> `aircon` </br> |
| nonessential_name:     | Optional    | `Non Essential` | Set the display name for the non-essential load                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 
| load1_name:            | Optional    |                 | Set the display name for the non-essential load 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| load1_icon:            | Optional    | `default`       | Change the non-essential load 1 image using presets or any mdi icon e.g. `mdi:ev-station`. Presets are: `default`, `oven`, `boiler`, `pump`, `aircon` You can also provide a sensor that returns the mdi icon.                                                                                                                                                                                                                                                                                                                                                                                             |
| load2_name:            | Optional    |                 | Set the display name for the non-essential load 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| load2_icon:            | Optional    | `default`       | Change the non-essential load 2 image using presets or any mdi icon e.g. `mdi:ev-station`. Presets are: `default`, `oven`, `boiler`, `pump`, `aircon` You can also provide a sensor that returns the mdi icon.                                                                                                                                                                                                                                                                                                                                                                                             |
| load3_name:            | Optional    |                 | Set the display name for the non-essential load 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| load3_icon:            | Optional    | none            | Change the non-essential load 3 image using any mdi icon e.g. `mdi:ev-station`. You can also provide a sensor that returns the mdi icon.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |

## Entities

Entity attributes below have been appended with the modbus register # e.g. `pv2_power_187` to indicate which Sunsynk
register should be read when configuring your sensors. Replace the default sensors with your own specific sensor names.
It is important that your sensors read the expected modbus register value. If you have missing sensors for any attribute
set it to none i.e. `day_pv_energy_108: none`. This will hide the sensor data from the card. To display a placeholder
with a default value of 0 set it to `zero` or any other value i.e. `solarday_108: zero`.

See the [WIKI](https://github.com/molikk/mlk-power-flow-card/wiki/Sensor-Mappings) for more information on sensor
mappings if using other integration methods.

| Sub-menu          | Default                                                      | Description              |
|-------------------|--------------------------------------------------------------|--------------------------|
| Solar Entities    | See [Solar Entities](#solar-entities) attributes below       | List of solar entities   |
| Battery Entities  | See [Battery Entities](#battery-entities) attributes below   | List of battery entities |
| Inverter Entities | See [Inverter Entities](#inverter-entities) attributes below | List of battery entities |
| Load Entities     | See [Load Entities](#load-entities) attributes below         | List of load entities    |
| Grid Entities     | See [Grid Entities](#grid-entities) attributes below         | List of grid entities    |

### Solar entities

| Attribute              | Requirement | Default                        | Description                                                                                                                    |
|------------------------|-------------|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| pv_total:              | Optional    |                                | Provide a sensor for total pv power. If omitted the card uses internal logic to calculate this based on the pv1-5 power (W)    |
| day_pv_energy_108:     | Optional    | `sensor.sunsynk_day_pv_energy` | Daily solar generation (kWh)                                                                                                   |
| monthly_pv_generation: | Optional    |                                | Monthly solar generation (kWh)                                                                                                 |
| yearly_pv_generation:  | Optional    |                                | Yearly solar generation (kWh)                                                                                                  |
| total_pv_generation:   | Optional    |                                | Total Solar generation                                                                                                         |
| remaining_solar:       | Optional    |                                | The remaining solar forecast for the day (kWh).                                                                                |
| pv1_power_186:         | Optional    | `sensor.sunsynk_pv1_power`     | PV string 1 power (W)                                                                                                          |
| pv1_production:        | Optional    |                                | PV string 1 daily energy (kWh)                                                                                                 |
| pv1_voltage_109:       | Optional    | `sensor.sunsynk_pv1_voltage`   | PV string 1 voltage (V)                                                                                                        |
| pv1_current_110:       | Optional    | `sensor.sunsynk_pv1_current`   | PV string 1 current (A)                                                                                                        |
| pv2_power_187:         | Optional    | `sensor.sunsynk_pv2_power`     | PV string 2 power (W)                                                                                                          |
| pv2_production:        | Optional    |                                | PV string 2 daily energy (kWh)                                                                                                 |
| pv2_voltage_111:       | Optional    | `sensor.sunsynk_pv2_voltage`   | PV string 2 voltage (V)                                                                                                        |
| pv2_current_112:       | Optional    | `sensor.sunsynk_pv2_current`   | PV string 2 current (A)                                                                                                        |
| pv3_power_188:         | Optional    |                                | PV string 3 power (W)                                                                                                          |
| pv3_production:        | Optional    |                                | PV string 3 daily energy (kWh)                                                                                                 |
| pv3_voltage_113:       | Optional    |                                | PV string 3 voltage (V)                                                                                                        |
| pv3_current_114:       | Optional    |                                | PV string 3 current (A)                                                                                                        |
| pv4_power_189:         | Optional    |                                | PV string 4 power (W)                                                                                                          |
| pv4_production:        | Optional    |                                | PV string 4 daily energy (kWh)                                                                                                 |
| pv4_voltage_115:       | Optional    |                                | PV string 4 voltage (V)                                                                                                        |
| pv4_current_116:       | Optional    |                                | PV string 4 current (A)                                                                                                        |
| pv5_power_189:         | Optional    |                                | PV string 5 power (W)                                                                                                          |
| pv5_production:        | Optional    |                                | PV string 5 daily energy (kWh)                                                                                                 |
| pv5_voltage_115:       | Optional    |                                | PV string 5 voltage (V)                                                                                                        |
| pv5_current_116:       | Optional    |                                | PV string 5 current (A)                                                                                                        |
| solar_sell_247:        | Optional    |                                | Displays icons to indicate if sell solar is active or not. The switch can be toggled by clicking on the icon (`on/off`, `1/0`) |
| environment_temp:      | Optional    |                                | Display outside temperature or other environment temperature below the sun icon                                                |

### Battery Entities

### Inverter Entities

### Load Entities

| Attribute               | Requirement  | Default                                        | Description                                                                                                                                                                                                                       |
|-------------------------|--------------|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| day_load_energy_84:     | Optional     | `sensor.sunsynk_day_load_energy`               | Daily load (kWh)                                                                                                                                                                                                                  |
| day_aux_energy:         | Optional     |                                                | Sensor that provides the daily AUX energy (kWh)                                                                                                                                                                                   |
| essential_power:        | Optional     | `none`                                         | Sensor that provides Essential Load power (W). Check [Essential Power Calculation](#essential-power-calculation) if entity not provided or `none`                                                                                 |
| essential_load1:        | Optional     |                                                | Sensor that contains the power of your essential load 1 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load1_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 1 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load1_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 1 icon clicked                                                                                                                                          |
| essential_load2:        | Optional     |                                                | Sensor that contains the power of your essential load 2 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load2_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 2 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load2_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 2 icon clicked                                                                                                                                          |
| essential_load3:        | Optional     |                                                | Sensor that contains the power of your essential load 3 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load3_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 3 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load3_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 3 icon clicked                                                                                                                                          |
| essential_load4:        | Optional     |                                                | Sensor that contains the power of your essential load 4 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load4_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 4 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load4_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 4 icon clicked                                                                                                                                          |
| essential_load5:        | Optional     |                                                | Sensor that contains the power of your essential load 5 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load5_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 5 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load5_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 5 icon clicked                                                                                                                                          |
| essential_load6:        | Optional     |                                                | Sensor that contains the power of your essential load 6 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load6_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 6 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load6_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 6 icon clicked                                                                                                                                          |
| essential_load7:        | Optional     |                                                | Sensor that contains the power of your essential load 7 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load7_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 7 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load7_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 7 icon clicked                                                                                                                                          |
| essential_load8:        | Optional     |                                                | Sensor that contains the power of your essential load 8 (W). Can also be used to display any sensor data i.e. temp, energy etc if `auto_scale: false`. If not present toggle state will be used instead.                          |
| essential_load8_extra:  | Optional     |                                                | Sensor that contains additional information you want displayed for your essential load 8 e.g. Daily kWh, Temperature etc                                                                                                          |
| essential_load8_toggle: | Optional     |                                                | Sensor that contains link to entity that will show up when essential load 8 icon clicked                                                                                                                                          |
| load_power_L1:          | Optional     |                                                | Load L1 Power (W)                                                                                                                                                                                                                 |
| load_power_L2:          | Optional     |                                                | Load L2 Power (W)                                                                                                                                                                                                                 |
| load_power_L3:          | Optional     |                                                | Load L3 Power (W)                                                                                                                                                                                                                 |
| aux_power_166:          | Optional     | `sensor.sunsynk_aux_power`                     | Auxiliary power (W)                                                                                                                                                                                                               |
| aux_load1:              | Optional     |                                                | Sensor that contains the power of your AUX load 1 (W)                                                                                                                                                                             |
| aux_load2:              | Optional     |                                                | Sensor that contains the power of your AUX load 2 (W)                                                                                                                                                                             |
| aux_load1_extra:        | Optional     |                                                | Sensor that contains additional information you want displayed for your aux load 1 e.g. Daily kWh, Temperature etc.  This entity can also be used to display additional sensor information above the aux icon when `aux_loads: 0` |
| aux_load2_extra:        | Optional     |                                                | Sensor that contains additional information you want displayed for your aux load 2 e.g. Daily kWh, Temperature etc                                                                                                                |
| aux_connected_status:   | Optional     |                                                | AUX Connected Status `on/off` or `1/0`                                                                                                                                                                                            |

### Grid Entities
| Attribute                   | Requirement  | Default                                       | Description                                                                                                                                                                                                 |
|-----------------------------|--------------|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| day_grid_import_76:         | Optional     | `sensor.sunsynk_day_grid_import`              | Daily grid import (kWh)                                                                                                                                                                                     |
| day_grid_export_77:         | Optional     | `sensor.sunsynk_day_grid_export`              | Daily grid export (kWh)                                                                                                                                                                                     |
| grid_frequency:             | Optional     |                                               | Grid frequency (Hz)                                                                                                                                                                                         |
| grid_ct_power_172:          | **Required** | `sensor.sunsynk_grid_ct_power`                | Grid CT L1 power (W)                                                                                                                                                                                        |
| grid_ct_power_L2:           | Optional     | `none`                                        | Grid CT L2 power (W)                                                                                                                                                                                        |
| grid_ct_power_L3:           | Optional     | `none`                                        | Grid CT L3 power (W)                                                                                                                                                                                        |
| grid_voltage_L1:            | Optional     |                                               | Grid Voltage L1 (V)                                                                                                                                                                                         |
| grid_voltage_L2:            | Optional     |                                               | Grid Voltage L2 (V)                                                                                                                                                                                         |
| grid_voltage_L3:            | Optional     |                                               | Grid Voltage L3 (V)                                                                                                                                                                                         |
| grid_current_L1:            | Optional     |                                               | Grid Current L1 (A)                                                                                                                                                                                         |
| grid_current_L2:            | Optional     |                                               | Grid Current L2 (A)                                                                                                                                                                                         |
| grid_current_L3:            | Optional     |                                               | Grid Current L3 (A)                                                                                                                                                                                         |
| grid_ct_power_total:        | Optional     |                                               | For three phase systems. The card will automatically calculate this based on (Grid CT L1 power + Grid CT L2 power + Grid CT L3 power)  You can optionally provide your own sensor for total grid power. (W) |
| grid_voltage:               | Optional     | `sensor.solis_grid_voltage`                   | Sensor providing grid voltage (v). Used only when inverter model is set to `solis`                                                                                                                          |
| nonessential_power          | Optional     | `none`                                        | Sensor that provides Essential Load power (W). Check [Nonessential Power Calculation](#nonessential-power-calculation) if entity not provided or `none`                                                     |
| non_essential_load1:        | Optional     |                                               | Sensor that contains the power of your non-essential load 1 (W). If not present toggle state will be used instead.                                                                                          |
| non_essential_load1_extra:  | Optional     |                                               | Sensor that contains additional information you want displayed for your nonessential load 1 e.g. Daily kWh, Temperature etc                                                                                 |
| non_essential_load1_toggle: | Optional     |                                               | Sensor that contains link to entity that will show up when nonessential load 1 icon clicked                                                                                                                 |
| non_essential_load2:        | Optional     |                                               | Sensor that contains the power of your non-essential load 2 (W). If not present toggle state will be used instead.                                                                                          |
| non_essential_load2_extra:  | Optional     |                                               | Sensor that contains additional information you want displayed for your nonessential load 2 e.g. Daily kWh, Temperature etc                                                                                 |
| non_essential_load2_toggle: | Optional     |                                               | Sensor that contains link to entity that will show up when nonessential load 2 icon clicked                                                                                                                 |
| non_essential_load3:        | Optional     |                                               | Sensor that contains the power of your non-essential load 3 (W). If not present toggle state will be used instead.                                                                                          |
| non_essential_load3_extra:  | Optional     |                                               | Sensor that contains additional information you want displayed for your nonessential load 3 e.g. Daily kWh, Temperature etc                                                                                 |
| non_essential_load3_toggle: | Optional     |                                               | Sensor that contains link to entity that will show up when nonessential load 3 icon clicked                                                                                                                 |
| essential_load8_toggle:     | Optional     |                                               | Sensor that contains link to entity that will show up when nonessential load 3 icon clicked                                                                                                                 |
| grid_connected_status_194:  | Optional     | `binary_sensor.sunsynk_grid_connected_status` | Grid connected status (case insensitive) `on/off`,`1/0`, `On-Grid/Off-Grid`, or `On Grid/Off Grid`                                                                                                          |
| energy_cost_buy:            | Optional     |                                               | Sensor that provides current buy energy cost per kWh                                                                                                                                                        |
| energy_cost_sell:           | Optional     |                                               | Sensor that provides current sell energy cost per kWh                                                                                                                                                       |
| prepaid_units:              | Optional     |                                               | Account balance of prepaid electricity units                                                                                                                                                                |
| max_sell_power:             | Optional     | `number.sunsynk_max_sell_power`               | Sets the maximum allowed output power to flow to the grid. Also known as "Export Control User Limit" (W)                                                                                                    |


### TODO Entities ;)
| Attribute                  | Requirement  | Default                                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------|--------------|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| use_timer_248:             | Optional     | `switch.sunsynk_toggle_system_timer`           | Displays "Use timer" status as an icon next to the inverter. Set to `no` to hide                                                                                                                                                                                                                                                                                                                                                                                                           |
| priority_load_243:         | Optional     | `switch.sunsynk_toggle_priority_load`          | Shows if energy pattern is set to priority load or priority battery as an icon next to the inverter. Set to `no` to hide                                                                                                                                                                                                                                                                                                                                                                   |
| day_battery_discharge_71:  | Optional     | `sensor.sunsynk_day_battery_discharge`         | Daily battery usage (kWh)                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| day_battery_charge_70:     | Optional     | `sensor.sunsynk_day_battery_charge`            | Daily battery charge (kWh)                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| day_aux_energy:            | Optional     |                                                | Sensor that provides the daily AUX energy (kWh)                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| inverter_voltage_154:      | Optional     | `sensor.sunsynk_inverter_voltage`              | Inverter L1 voltage (V)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| inverter_voltage_L2:       | Optional     |                                                | Inverter L2 voltage (V)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| inverter_voltage_L3:       | Optional     |                                                | Inverter L3 voltage (V)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| load_frequency_192:        | Optional     | `sensor.sunsynk_load_frequency`                | Load frequency (Hz)                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| inverter_current_164:      | Optional     | `sensor.sunsynk_inverter_current`              | Inverter L1 current (A)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| inverter_current_L2:       | Optional     |                                                | Inverter L2 current (A)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| inverter_current_L3:       | Optional     |                                                | Inverter L3 current (A)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| inverter_power_175:        | Optional     | `sensor.sunsynk_inverter_power`                | Inverter power (W).                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| battery_voltage_183:       | Optional     | `sensor.sunsynk_battery_voltage`               | Battery voltage (V)                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| battery_soc_184:           | **Required** | `sensor.sunsynk_battery_soc`                   | Battery state of charge (%)                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| battery_power_190:         | **Required** | `sensor.sunsynk_battery_power`                 | Battery power (W). Requires a negative number for battery charging and a positive number for battery discharging. Set the `invert_power:` battery attribute to `yes` if your sensor reports this the other way around                                                                                                                                                                                                                                                                      |
| battery_current_191:       | **Required** | `sensor.sunsynk_battery_current`               | Battery current (A)                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| battery_temp_182:          | Optional     | `sensor.sunsynk_battery_temperature`           | Battery temperature (°). Note do not define this sensor if you want to display battery SOH. See below.                                                                                                                                                                                                                                                                                                                                                                                     |
| battery_soh:               | Optional     |                                                | Battery State of Health (SOH) (%). You can chose to display either battery temperature or battery SOH but not both. They are displayed in the same place on the card. If `battery_temp_182:` is defined it will take priority and this sensor will not be displayed.                                                                                                                                                                                                                       |
| battery_rated_capacity:    | Optional     |                                                | Battery rated capacity (Ah). If provided this sensor will be used to calculate battery energy. The`energy` attribute under the battery card configuration will be ignored.                                                                                                                                                                                                                                                                                                                 |
| inverter_status_59:        | Optional     | `sensor.sunsynk_overall_state`                 | Expects a sensor that contains inverter status represented as a string or number. For Sunsynk  `0, 1, 2, 3, 4` or `standby, selftest, normal, alarm, fault`. For Lux `0,1,2,4,5,7,8,9,10,11,12,16,17,20,32,40,64,136,192`. For Solis expects a numeric value `0-57`.  For Goodwe `0,1,2,3,4,5` or `Wait mode, Normal (On-Grid), Normal (Off-Grid), Fault Mode, Flash Mode, Check Mode`. For Goodwe_gridmode `0,1,2` or `Idle, Exporting, Importing`                                        |
| battery_status:            | Optional     | `sensor.battery_mode_code`                     | Used only when inverter model is set to  `goodwe`, `goodwe_gridmode` or `huawei`. Battery status `0, 1, 2, 3, 4`                                                                                                                                                                                                                                                                                                                                                                           |
| radiator_temp_91:          | Optional     | `sensor.sunsynk_radiator_temperature`          | Inverter AC temperature (℃)                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| dc_transformer_temp_90:    | Optional     | `sensor.sunsynk_dc_transformer_temperature`    | Inverter DC temperature (℃)                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| prog1_time:                | Optional     | `sensor.sunsynk_time_slot_1`                   | Program 1 start time (`HH:MM`)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| prog1_capacity:            | Optional     | `number.sunsynk_system_mode_soc_time1`         | Program 1 capacity (SOC) setting                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| prog1_charge:              | Optional     | `switch.sunsynk_system_mode_grid_charge_time1` | Program 1 charge options (`on/off`, `1/0`, `No Grid or Gen`)                                                                                                                                                                                                                                                                                                                                                                                                                               |
| prog2_time:                | Optional     | `sensor.sunsynk_time_slot_2`                   | Program 2 start time (`HH:MM`)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| prog2_capacity:            | Optional     | `number.sunsynk_system_mode_soc_time2`         | Program 2 capacity (SOC) setting                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| prog2_charge:              | Optional     | `switch.sunsynk_system_mode_grid_charge_time2` | Program 2 charge options (`on/off`, `1/0`, `No Grid or Gen`)                                                                                                                                                                                                                                                                                                                                                                                                                               |
| prog3_time:                | Optional     | `sensor.sunsynk_time_slot_3`                   | Program 3 start time (`HH:MM`)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| prog3_capacity:            | Optional     | `number.sunsynk_system_mode_soc_time3`         | Program 3 capacity (SOC) setting                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| prog3_charge:              | Optional     | `switch.sunsynk_system_mode_grid_charge_time3` | Program 3 charge options (`on/off`, `1/0`, `No Grid or Gen`)                                                                                                                                                                                                                                                                                                                                                                                                                               |
| prog4_time:                | Optional     | `sensor.sunsynk_time_slot_4`                   | Program 4 start time (`HH:MM`)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| prog4_capacity:            | Optional     | `number.sunsynk_system_mode_soc_time4`         | Program 4 capacity (SOC) setting                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| prog4_charge:              | Optional     | `switch.sunsynk_system_mode_grid_charge_time4` | Program 4 charge options (`on/off`, `1/0`, `No Grid or Gen`)                                                                                                                                                                                                                                                                                                                                                                                                                               |
| prog5_time:                | Optional     | `sensor.sunsynk_time_slot_5`                   | Program 5 start time (`HH:MM`)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| prog5_capacity:            | Optional     | `number.sunsynk_system_mode_soc_time5`         | Program 5 capacity (SOC) setting                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| prog5_charge:              | Optional     | `switch.sunsynk_system_mode_grid_charge_time5` | Program 5 charge options (`on/off`, `1/0`, `No Grid or Gen`)                                                                                                                                                                                                                                                                                                                                                                                                                               |
| prog6_time:                | Optional     | `sensor.sunsynk_time_slot_6`                   | Program 6 start time (`HH:MM`)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| prog6_capacity:            | Optional     | `number.sunsynk_system_mode_soc_time6`         | Program 6 capacity (SOC) setting                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| prog6_charge:              | Optional     | `switch.sunsynk_system_mode_grid_charge_time6` | Program 6 charge options (`on/off`, `1/0`, `No Grid or Gen`)                                                                                                                                                                                                                                                                                                                                                                                                                               |
| battery_current_direction: | Optional     | `sensor.solis_battery_current_direction`       | Used only when inverter model is set to `solis` (`0`, `1`)                                                                                                                                                                                                                                                                                                                                                                                                                                 |

The card calculates the sensors below based on supplied attributes in the config so you don't need to define them in Home
Assistant. NOTE if your essential and non-essential readings are inaccurate replace sensor 169 with 167. Alternatively
provide the card with sensors that calculate this data i.e essential_power: and nonessential_power:


## Calculations
### Total PV

Total PV is provided through `total_pv` entity.

If `total_pv` entity is not provided value will be calculated as:
```
total_pv = pv1_power_186 + pv2_power_187 + pv3_power_188 + pv4_power_189 + pv5_power
```

### Essential Power Calculation

Essential Load is provided through `essential_power` entity.

* For 3 phases mode (`three_phase:true`) when `essential_power` is not provided it will be calculated as: 
```
load_power_L1 +  load_power_L2 +  load_power_L3
```

* For non 3 phase mode (`three_phase:false`)  when `essential_power` is not provided one of 2 calculations mode will be used:
  * when `inverter_power_175` is provided:
    ```
    essential_power = inverter_power_175 + grid_power_169 - aux_power_166
    ```
  * otherwise  
    ```
    essential_power = totalPV + battery_power_190 + grid_power_169 - aux_power_166
    ```


### Nonessential Power Calculation

Nonessential Load is provided through `nonessential_power` entity.

* If there is no  `nonessential_power` entity and there is no `grid_power_169` entity then
```
nonessentialPower = non_essential_load1 + non_essential_load2 + non_essential_load3
```

* otherwise

  * If `three_phase:false`

  ```
  nonessential = grid_ct_power_172 - grid_power_169
  ```

  * If `three_phase:true`

  ```
  nonessential = grid_ct_power_172 + grid_ct_power_L2 + grid_ct_power_L3 - grid_power_169
  ```
### Autarky

Autarky is the percentage of self-sufficiency through Home Production. <br />
Ratio is the percentage of produced electricity used by the home. <br />
It is calculated based on the formula below and borrowed from the [Power Distribution Card](https://github.com/JonahKr/power-distribution-card)  <br />
<ul><li>Autarky in Percent = Home Production / Home Consumption </li>
<li>Ratio in Percent = Home Consumption / Home Production</li></ul> 

Home Production = Solar + Battery (discharge) + Aux (in), Home Consumption = Essential power + Nonessential power + Aux (out) + Battery (charge) <br /> 

Auto&Self mode represents Auto consumption & Self usage. Auto consumption is similar to Power Ratio, Self consumption is ratio between produced energy to all energy (produced energy + imported energy) 